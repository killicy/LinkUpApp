{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Documents\\\\Assign\\\\Lonk\\\\LinkUpApp\\\\app\\\\screens\\\\MainPage.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport \"./App.css\";\nimport UserStore from \"./stores/UserStore\";\nimport Cookies from 'universal-cookie';\nimport SubmitButton from \"./SubmitButton\";\nimport EventMaker from \"./EventMaker\";\nimport MainContent from \"./MainContent\";\nimport Friends from \"./Friends\";\nimport { Card } from \"react-bootstrap\";\nimport Confirmation from \"./Confirmation\";\nimport NavBar from \"./NavBar\";\nimport Profile from \"./Profile\";\nimport { fetchPhotos, openUploadWidget } from \"./CloudinaryService\";\nimport { CloudinaryContext, Image, Transformation } from \"cloudinary-react\";\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport DatePicker from \"react-datepicker\";\nimport PropTypes from 'prop-types';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BrowserRouter as Router, Switch, Link, Redirect, Route } from \"react-router-dom\";\n\nvar LinkUp = function (_React$Component) {\n  _inherits(LinkUp, _React$Component);\n\n  var _super = _createSuper(LinkUp);\n\n  function LinkUp(props) {\n    var _this;\n\n    _classCallCheck(this, LinkUp);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      message: '',\n      isLoggedin: false,\n      id: 'a',\n      url: _this.props.match.params.user,\n      events: [],\n      friends: [],\n      friendEvents: [],\n      friendEvents1: [],\n      show: false,\n      startDate: new Date(),\n      startDate1: new Date(),\n      description: '',\n      title: '',\n      success: false,\n      friend: false,\n      Profile_pic: '',\n      user: {\n        Username: 'placeholder'\n      },\n      showy: [],\n      event_id: null,\n      participants: [],\n      error: ''\n    };\n    return _this;\n  }\n\n  _createClass(LinkUp, [{\n    key: \"setInputValue\",\n    value: function setInputValue(property, val) {\n      this.setState(_defineProperty({}, property, val));\n    }\n  }, {\n    key: \"participate\",\n    value: function participate(event, index, string) {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function participate$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/event/participants', {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                },\n                body: JSON.stringify({\n                  Title: event.Title\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.success === true) {\n                  _this2.state[string][index] = data.participants;\n                }\n              }));\n\n            case 3:\n              this.setState({\n                success: false\n              });\n              _context.next = 8;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 6]], Promise);\n    }\n  }, {\n    key: \"sort_by\",\n    value: function sort_by(field, reverse, primer) {\n      var key = primer ? function (x) {\n        return primer(x[field]);\n      } : function (x) {\n        return x[field];\n      };\n      reverse = !reverse ? 1 : -1;\n      return function (a, b) {\n        return a = key(a), b = key(b), reverse * ((a > b) - (b > a));\n      };\n    }\n  }, {\n    key: \"resendConfirmation\",\n    value: function resendConfirmation() {\n      var _this3 = this;\n\n      return _regeneratorRuntime.async(function resendConfirmation$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/user/confirmationEmail', {\n                method: 'GET',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                return _this3.setState({\n                  success: data.success,\n                  username: data.username\n                });\n              }));\n\n            case 3:\n              if (this.state.success) {\n                this.state.success = false;\n              } else {}\n\n              _context2.next = 8;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, [[0, 6]], Promise);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var seenNames;\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(fetch('https://localhost:5000/api/user/isLoggedIn', {\n                method: 'GET',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                return _this4.setState({\n                  isLoggedin: data.success,\n                  error: data.msg\n                });\n              }));\n\n            case 3:\n              if (this.state.isLoggedin) {\n                console.log(this.state.error);\n              } else {\n                console.log(this.state.error);\n              }\n\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 9:\n              _context3.prev = 9;\n              _context3.next = 12;\n              return _regeneratorRuntime.awrap(fetch('https://localhost:5000/api/user/usernameInfo', {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                },\n                body: JSON.stringify({\n                  Username: this.state.url\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.success === false) {\n                  _this4.props.history.push('/TheVoid');\n                }\n\n                _this4.setState({\n                  events: data.UserEvents,\n                  friends: data.Friends,\n                  friendEvents: data.FriendEvents,\n                  success: data.success,\n                  addFriend: data.addFriend,\n                  friend: data.friend,\n                  Profile_pic: data.Profile_pic,\n                  user: data.user\n                });\n              }));\n\n            case 12:\n              if (this.state.success === true) {\n                this.state.friendEvents.map(function (events, index) {\n                  var User = _this4.state.friends[index].Username;\n                  events[User].map(function (event, index) {\n                    console.log(event);\n\n                    _this4.state.friendEvents1.push(event);\n                  });\n                });\n                seenNames = {};\n                this.state.friendEvents1 = this.state.friendEvents1.filter(function (currentObject) {\n                  if (currentObject.Title in seenNames) {\n                    return false;\n                  } else {\n                    seenNames[currentObject.Title] = true;\n                    return true;\n                  }\n                });\n                console.log(this.state.friendEvents1[1]);\n                this.state.friendEvents1 = this.state.friendEvents1.sort(function (a, b) {\n                  return new Date(b.Date_Added) - new Date(a.Date_Added);\n                });\n                this.state.friendEvents1.map(function (event, index) {\n                  _this4.enrolled(event, index, \"showy\");\n\n                  _this4.participate(event, index, \"participants\");\n                });\n                this.state.events.map(function (event, index) {\n                  _this4.enrolled(event, index, \"showy1\");\n\n                  _this4.participate(event, index, \"participants1\");\n                });\n                this.setState({\n                  success: true,\n                  friend: this.state.friend\n                });\n              } else {}\n\n              _context3.next = 17;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t1 = _context3[\"catch\"](9);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, [[0, 6], [9, 15]], Promise);\n    }\n  }, {\n    key: \"setShow\",\n    value: function setShow() {\n      if (this.state.show === false) {\n        this.setState({\n          show: true\n        });\n      } else {\n        this.setState({\n          show: false,\n          message: ''\n        });\n      }\n    }\n  }, {\n    key: \"addFriend\",\n    value: function addFriend() {\n      var _this5 = this;\n\n      return _regeneratorRuntime.async(function addFriend$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/user/addFriend', {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                },\n                body: JSON.stringify({\n                  Username: this.state.url\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                return _this5.setState({\n                  success: data.success\n                });\n              }));\n\n            case 3:\n              if (this.state.success === true) {\n                this.setState({\n                  success: false\n                });\n              } else {}\n\n              _context4.next = 8;\n              break;\n\n            case 6:\n              _context4.prev = 6;\n              _context4.t0 = _context4[\"catch\"](0);\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, [[0, 6]], Promise);\n    }\n  }, {\n    key: \"setDater\",\n    value: function setDater(date) {\n      this.setState({\n        startDate: new Date(date),\n        startDate1: new Date(date)\n      });\n    }\n  }, {\n    key: \"enrolled\",\n    value: function enrolled(event, index, string) {\n      var _this6 = this;\n\n      return _regeneratorRuntime.async(function enrolled$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/event/attendingEvent', {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                },\n                body: JSON.stringify({\n                  Title: event.Title\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.success === true) {\n                  _this6.state[string][index] = true;\n                } else {\n                  _this6.state[string][index] = false;\n                }\n              }));\n\n            case 3:\n              this.setState({\n                success: false\n              });\n              _context5.next = 8;\n              break;\n\n            case 6:\n              _context5.prev = 6;\n              _context5.t0 = _context5[\"catch\"](0);\n\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, [[0, 6]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"MainPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 7\n        }\n      }, React.createElement(\"div\", {\n        className: \"middleContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 9\n        }\n      }, React.createElement(MainContent, {\n        data: this.state,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }\n      })));\n    }\n  }]);\n\n  return LinkUp;\n}(React.Component);\n\nexport default LinkUp;","map":{"version":3,"sources":["E:/Documents/Assign/Lonk/LinkUpApp/app/screens/MainPage.js"],"names":["React","UserStore","Cookies","SubmitButton","EventMaker","MainContent","Friends","Card","Confirmation","NavBar","Profile","fetchPhotos","openUploadWidget","CloudinaryContext","Image","Transformation","Button","Modal","DatePicker","PropTypes","BrowserRouter","Router","Switch","Link","Redirect","Route","LinkUp","props","state","message","isLoggedin","id","url","match","params","user","events","friends","friendEvents","friendEvents1","show","startDate","Date","startDate1","description","title","success","friend","Profile_pic","Username","showy","event_id","participants","error","property","val","setState","event","index","string","fetch","process","env","REACT_APP_API_URL","method","credentials","headers","REACT_APP_CLIENT_URL","body","JSON","stringify","Title","then","response","json","data","field","reverse","primer","key","x","a","b","username","msg","console","log","history","push","UserEvents","FriendEvents","addFriend","map","User","seenNames","filter","currentObject","sort","Date_Added","enrolled","participate","date","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n//import ReactDOM from 'react-dom'\r\nimport './App.css';\r\nimport UserStore from './stores/UserStore';\r\nimport Cookies from 'universal-cookie';\r\nimport SubmitButton from './SubmitButton';\r\nimport EventMaker from './EventMaker';\r\nimport MainContent from './MainContent';\r\nimport Friends from './Friends';\r\nimport { Card } from \"react-bootstrap\";\r\nimport Confirmation from './Confirmation';\r\nimport NavBar from './NavBar';\r\nimport Profile from './Profile';\r\nimport { fetchPhotos, openUploadWidget } from \"./CloudinaryService\";\r\nimport { CloudinaryContext, Image, Transformation } from \"cloudinary-react\";\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport DatePicker from \"react-datepicker\";\r\nimport PropTypes from 'prop-types';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Link,\r\n  Redirect,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\n\r\nclass LinkUp extends React.Component {\r\n  constructor(props){\r\n      super(props);\r\n      this.state = {\r\n          message: '',\r\n          isLoggedin: false,\r\n          id: 'a',\r\n          url: this.props.match.params.user,\r\n          events: [],\r\n          friends: [],\r\n          friendEvents: [],\r\n          friendEvents1: [],\r\n          show: false,\r\n          startDate: new Date(),\r\n          startDate1: new Date(),\r\n          description: '',\r\n          title: '',\r\n          success: false,\r\n          friend: false,\r\n          Profile_pic: '',\r\n          user: {Username: 'placeholder'},\r\n          showy: [],\r\n          event_id: null,\r\n          participants: [],\r\n          error: ''\r\n      }\r\n  }\r\n\r\n  setInputValue(property, val) {\r\n\r\n      this.setState({\r\n          [property]: val\r\n      })\r\n  }\r\n\r\n  async participate(event, index, string){\r\n    try {\r\n      await fetch(process.env.REACT_APP_API_URL + '/api/event/participants', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        },\r\n        body: JSON.stringify({\r\n          Title: event.Title\r\n        })}).then(response => response.json()).then(data => {\r\n          if(data.success === true){\r\n            this.state[string][index] = data.participants;\r\n          }\r\n        });\r\n        this.setState({\r\n          success: false\r\n        });\r\n     }\r\n     catch(e) {\r\n     }\r\n  }\r\n\r\n  sort_by(field, reverse, primer){\r\n\r\n  const key = primer ?\r\n    function(x) {\r\n      return primer(x[field])\r\n    } :\r\n    function(x) {\r\n      return x[field]\r\n    };\r\n\r\n  reverse = !reverse ? 1 : -1;\r\n\r\n  return function(a, b) {\r\n    return a = key(a), b = key(b), reverse * ((a > b) - (b > a));\r\n  }\r\n}\r\n\r\n\r\n\r\n  async resendConfirmation(){\r\n    try {\r\n      await fetch(process.env.REACT_APP_API_URL + '/api/user/confirmationEmail', {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        }}).then(response => response.json()).then(data => this.setState({success: data.success, username: data.username}));\r\n         if (this.state.success) {\r\n           this.state.success = false;\r\n         }\r\n         else {\r\n         }\r\n    }\r\n    catch(e) {\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      await fetch('https://localhost:5000/api/user/isLoggedIn', {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        }}).then(response => response.json()).then(data => this.setState({isLoggedin: data.success,error: data.msg}));\r\n         if (this.state.isLoggedin) {\r\n           console.log(this.state.error);\r\n         }\r\n         else {\r\n           console.log(this.state.error);\r\n         }\r\n    }\r\n    catch(e) {\r\n      console.log(e);\r\n    }\r\n    try {\r\n      await fetch('https://localhost:5000/api/user/usernameInfo', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        },\r\n        body: JSON.stringify({\r\n          Username: this.state.url\r\n        })}).then(response => response.json()).then(data => {\r\n          if(data.success === false)\r\n          {\r\n            this.props.history.push('/TheVoid');\r\n          }\r\n          this.setState({events: data.UserEvents, friends: data.Friends, friendEvents: data.FriendEvents, success: data.success, addFriend: data.addFriend, friend: data.friend, Profile_pic: data.Profile_pic, user: data.user});\r\n        });\r\n        if(this.state.success === true){\r\n          this.state.friendEvents.map((events, index) => {\r\n              var User = this.state.friends[index].Username;\r\n              events[User].map((event, index) =>{\r\n                console.log(event);\r\n                this.state.friendEvents1.push(event);\r\n              });\r\n          });\r\n\r\n          var seenNames = {};\r\n          this.state.friendEvents1 = this.state.friendEvents1.filter(function(currentObject) {\r\n              if (currentObject.Title in seenNames) {\r\n                  return false;\r\n              } else {\r\n                  seenNames[currentObject.Title] = true;\r\n                  return true;\r\n              }\r\n          });\r\n          console.log(this.state.friendEvents1[1]);\r\n          this.state.friendEvents1 = this.state.friendEvents1.sort((a,b) => {\r\n              return new Date(b.Date_Added) - new Date(a.Date_Added);})\r\n\r\n          this.state.friendEvents1.map((event, index) => {\r\n              this.enrolled(event, index, \"showy\");\r\n              this.participate(event, index, \"participants\");\r\n          });\r\n          this.state.events.map((event, index) => {\r\n              this.enrolled(event, index, \"showy1\");\r\n              this.participate(event, index, \"participants1\");\r\n          });\r\n          this.setState({\r\n            success: true,\r\n            friend: this.state.friend\r\n          })\r\n        }\r\n        else{\r\n        }\r\n    }\r\n    catch(e) {\r\n    }\r\n  }\r\n\r\n  setShow(){\r\n    if(this.state.show === false){\r\n      this.setState({\r\n        show: true\r\n      });\r\n    }\r\n    else{\r\n      this.setState({\r\n        show: false,\r\n        message: ''\r\n      });\r\n    }\r\n  }\r\n\r\n  async addFriend(){\r\n    try {\r\n      await fetch(process.env.REACT_APP_API_URL + '/api/user/addFriend', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        },\r\n        body: JSON.stringify({\r\n          Username: this.state.url\r\n        })}).then(response => response.json()).then(data => this.setState({success: data.success}));\r\n        if(this.state.success === true){\r\n          this.setState({\r\n            success: false\r\n          });\r\n        }\r\n        else{\r\n        }\r\n    }\r\n    catch(e) {\r\n    }\r\n  }\r\n  setDater(date){\r\n    this.setState({startDate: new Date(date), startDate1: new Date(date)});\r\n  }\r\n\r\n  async enrolled(event, index, string){\r\n    try {\r\n      await fetch(process.env.REACT_APP_API_URL + '/api/event/attendingEvent', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        },\r\n        body: JSON.stringify({\r\n          Title: event.Title,\r\n        })}).then(response => response.json()).then(data => {\r\n          if(data.success === true){\r\n            this.state[string][index] = true;\r\n          }\r\n          else{\r\n            this.state[string][index] = false;\r\n          }\r\n      });\r\n        this.setState({\r\n          success: false\r\n        });\r\n    }\r\n    catch(e) {\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"MainPage\">\r\n        <div className=\"middleContainer\">\r\n            <MainContent data = {this.state}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LinkUp;\r\n"]},"metadata":{},"sourceType":"module"}