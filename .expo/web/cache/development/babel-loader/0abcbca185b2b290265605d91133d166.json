{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Documents\\\\Assign\\\\Lonk\\\\LinkUpApp\\\\app\\\\screens\\\\Login.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\n\nvar Login = function (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this);\n    _this.state = {\n      username: '',\n      password: '',\n      msg: '',\n      buttonDisabled: false,\n      isLoggedin: false\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/user/isLoggedin', {\n                method: 'GET',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                return _this2.setState({\n                  isLoggedin: data.success\n                });\n              }));\n\n            case 3:\n              if (this.state.isLoggedin) {\n                this.props.history.push('/Profile/' + this.state.message);\n              } else {}\n\n              _context.next = 8;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 6]], Promise);\n    }\n  }, {\n    key: \"setInputValue\",\n    value: function setInputValue(property, val) {\n      console.log(val);\n\n      if (val.length > 50) {\n        return;\n      }\n\n      this.setState(_defineProperty({}, property, val));\n    }\n  }, {\n    key: \"doSignUp\",\n    value: function doSignUp() {\n      this.props.history.push('/Register');\n    }\n  }, {\n    key: \"doLogin\",\n    value: function doLogin() {\n      var _this3 = this;\n\n      return _regeneratorRuntime.async(function doLogin$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(this.state.password);\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(fetch(process.env.REACT_APP_API_URL + '/api/user/login', {\n                method: 'POST',\n                credentials: 'include',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL\n                },\n                body: JSON.stringify({\n                  Username: this.state.username,\n                  Password: this.state.password\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.success) {\n                  _this3.props.history.push('/Profile/' + _this3.state.username);\n                }\n\n                _this3.setState({\n                  message: data.msg\n                });\n              }));\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"loginStyling\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }\n      }, React.createElement(\"div\", {\n        className: \"loginForm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }\n      }, React.createElement(\"form\", {\n        className: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }\n      }, React.createElement(\"h3\", {\n        className: \"header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 14\n        }\n      }, \"Sign In\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 14\n        }\n      }, React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 18\n        }\n      }, \"Username\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Enter username\",\n        onChange: function onChange(e) {\n          return _this4.setInputValue(\"username\", e.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 18\n        }\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 14\n        }\n      }, React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 18\n        }\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        placeholder: \"Enter password\",\n        onChange: function onChange(e) {\n          return _this4.setInputValue(\"password\", e.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 18\n        }\n      }), React.createElement(Button, {\n        variant: \"primary\",\n        block: true,\n        onClick: function onClick() {\n          return _this4.doLogin();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 18\n        }\n      }, \"Sign In\")), React.createElement(\"p\", {\n        className: \"need-an-account text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 14\n        }\n      }, \"Need an account? \", React.createElement(\"a\", {\n        href: process.env.REACT_APP_CLIENT_URL + \"/Register\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 35\n        }\n      }, \"Register\")), React.createElement(\"p\", {\n        className: \"forgot-password text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 14\n        }\n      }, \"Forgot \", React.createElement(\"a\", {\n        href: process.env.REACT_APP_CLIENT_URL + \"/PasswordRecovery\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, \"Password?\")), this.state.message ? React.createElement(\"div\", {\n        className: \"alert alert-danger text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 37\n        }\n      }, this.state.message) : '')));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default Login;","map":{"version":3,"sources":["E:/Documents/Assign/Lonk/LinkUpApp/app/screens/Login.js"],"names":["React","Component","Login","state","username","password","msg","buttonDisabled","isLoggedin","fetch","process","env","REACT_APP_API_URL","method","credentials","headers","REACT_APP_CLIENT_URL","then","response","json","data","setState","success","props","history","push","message","property","val","console","log","length","body","JSON","stringify","Username","Password","e","setInputValue","target","value","doLogin"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';\r\nimport {Text, Alert, Button, Image, ImageBackground, SafeAreaView, StyleSheet, TouchableHighlight, View, TextInput } from 'react-native';\r\n\r\nclass Login extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      msg: '',\r\n      buttonDisabled: false,\r\n      isLoggedin: false,\r\n    }\r\n  }\r\n  async componentDidMount() {\r\n    try {\r\n      await fetch(process.env.REACT_APP_API_URL + '/api/user/isLoggedin', {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        }}).then(response => response.json()).then(data => this.setState({isLoggedin: data.success}));\r\n         if (this.state.isLoggedin) {\r\n          this.props.history.push('/Profile/' + this.state.message);\r\n         }\r\n         else {\r\n         }\r\n    }\r\n    catch(e) {\r\n    }\r\n  }\r\n  setInputValue(property, val) {\r\n    console.log(val);\r\n    if (val.length > 50) {\r\n      return;\r\n    }\r\n    this.setState({\r\n      [property]: val\r\n    })\r\n  }\r\n\r\n\r\n  doSignUp(){\r\n    this.props.history.push('/Register');\r\n  }\r\n  async doLogin(){\r\n    console.log(this.state.password)\r\n    await fetch(process.env.REACT_APP_API_URL + '/api/user/login', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': process.env.REACT_APP_CLIENT_URL,\r\n        },\r\n        body: JSON.stringify({\r\n          Username: this.state.username,\r\n          Password: this.state.password\r\n        })}).then(response => response.json()).then((data) => {\r\n          if(data.success){\r\n            this.props.history.push('/Profile/' + this.state.username);\r\n          }\r\n          this.setState({message: data.msg});\r\n        });\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"loginStyling\">\r\n        <div className=\"loginForm\">\r\n          <form className=\"login\">\r\n             <h3 className=\"header\">Sign In</h3>\r\n             <div className=\"form-group\">\r\n                 <h6>Username</h6>\r\n                 <input type=\"text\" className=\"form-control\" placeholder=\"Enter username\" onChange = {e => this.setInputValue(\"username\", e.target.value)}/>\r\n             </div>\r\n             <div className=\"form-group\">\r\n                 <h6>Password</h6>\r\n                 <input type=\"password\" className=\"form-control\" placeholder=\"Enter password\" onChange = {e => this.setInputValue(\"password\", e.target.value)}/>\r\n                 <Button variant=\"primary\" block onClick = {() => this.doLogin()}>Sign In</Button>\r\n             </div>\r\n             <p className=\"need-an-account text-right\">\r\n                 Need an account? <a href={process.env.REACT_APP_CLIENT_URL + \"/Register\"}>Register</a>\r\n             </p>\r\n             <p className=\"forgot-password text-right\">\r\n                 Forgot <a href={process.env.REACT_APP_CLIENT_URL + \"/PasswordRecovery\"}>Password?</a>\r\n             </p>\r\n             {\r\n               this.state.message ? <div className=\"alert alert-danger text-center\">{this.state.message}</div> : ''\r\n             }\r\n         </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}